var LexerTransformation = require('libresignage/markup/Lexer/LexerTransformation');
var LexerTokenDefs = require('libresignage/markup/Lexer/LexerTokenDefs');

/**
* Subclass of LexerTransformation for converting lexemes.
*
* @memberof module:libresignage/markup
*/
class ConvertTransformation extends LexerTransformation {
	/**
	* Construct a new ConvertTransformation.
	*
	* @see {@link module:libresignage/markup.LexerTransformation}
	*/
	constructor(source, dest) {
		super(source);

		this.source = source;
		this.dest = dest;
	}

	/**
	* @see {@link module:libresignage/markup.LexerTransformation#transform}
	*/
	transform(lexemes) {
		let ret = [];
		for (let l of lexemes) {
			if (l.get_token().get_type() == this.source) {
				l.ch_type(LexerTokenDefs.get(this.dest));
			}
			ret.push(l);
		}
		return ret;
	}
}
module.exports = ConvertTransformation;
