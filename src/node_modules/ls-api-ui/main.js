var APIError = require('ls-api').APIError;
var dialog = require('ls-dialog');

exports.handle_error = function(e) {
	if (e === null) { return; }
	if (e.response.error in APIError.messages) {
		dialog.dialog(
			dialog.TYPE.ALERT,
			APIError.messages[e.code].short,
			APIError.messages[e.code].long + `(${e.response.e_msg})`
		);
	} else {
		if (e.response.e_msg != 'Unknown') {
			dialog.dialog(
				dialog.TYPE.ALERT,
				'An error occured',
				e.response.e_msg
			);
		} else {
			dialog.dialog(
				dialog.TYPE.ALERT,
				'An unknown error occured',
				'The server encountered an unknown error.'
			);
		}
	}
	console.error(e.toString());
}
